import t,{useState as e,Fragment as a,useEffect as n}from"react";import{scrollTable as r,cellEdit as s,casUpdateRow as o,setup as l}from"@sassoftware/restafedit";function p(n){const{appEnv:l}=n,[p,c]=e(!0),[i,u]=e(null),m=t=>{u({status:2,msg:t})},h=l.appControl.appData.getViewer(l.appControl.appData);/*#__PURE__*/return t.createElement(a,null,/*#__PURE__*/t.createElement(h,{onEdit:(t,e,a,n)=>{s(t,e,a,n,l).then(t=>{c(!p),u(null)}).catch(t=>{m(t),u(t)})},onScroll:t=>{r(t,l).then(t=>{c(!p),u({status:0,msg:null})}).catch(t=>{m(t)})},onSave:t=>{o(t,l).then(t=>{u({status:0,msg:t})}).catch(t=>u({status:2,msg:t}))},status:i,appEnv:l}))}function c(a){const{viyaConnection:s,appControl:o}=a,[c,i]=e({});n(()=>{(async()=>{let t=await l(s,o);return await r("first",t),t})().then(t=>{i(t)}).catch(t=>{throw new Error(JSON.stringify(t))})},[]);let u=null;return null!=c.session&&(u=/*#__PURE__*/t.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/t.createElement(p,{appEnv:c,key:c.id}))),u}export{c as DataEditor,p as DataViewer};
//# sourceMappingURL=index.modern.mjs.map
