import t,{useState as a,Fragment as e,useEffect as n}from"react";import{scrollTable as r,cellEdit as s,casUpdateRow as o,setup as l}from"@sassoftware/restafedit";function p(n){const{appEnv:l}=n,[p,c]=a(!0),[i,u]=a(null),m=t=>{u({status:2,msg:t})},E=l.appControl.appData.getViewer(l.appControl.appData);/*#__PURE__*/return t.createElement(e,null,/*#__PURE__*/t.createElement(E,{onEdit:(t,a,e,n)=>{s(t,a,e,n,l).then(t=>{c(!p),u(null)}).catch(t=>{m(t),u(t)})},onScroll:t=>{r(t,l).then(t=>{c(!p),u({status:0,msg:null})}).catch(t=>{m(t)})},onSave:t=>{o(t,l).then(t=>{u({status:0,msg:t})}).catch(t=>u({status:2,msg:t}))},status:i,appEnv:l}))}var c={DataEditor:function(e){const{viyaConnection:s,appControl:o}=e,[c,i]=a({});n(()=>{(async()=>{let t=await l(s,o);return await r("first",t),t})().then(t=>{i(t)}).catch(t=>{throw new Error(JSON.stringify(t))})},[]);let u=null;return null!=c.session&&(u=/*#__PURE__*/t.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/t.createElement(p,{appEnv:c,key:c.id}))),u},DataViewer:p};export{c as default};
//# sourceMappingURL=index.modern.mjs.map
