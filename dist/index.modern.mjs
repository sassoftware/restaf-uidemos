import{useState as t,Fragment as a,useEffect as e}from"react";import{scrollTable as n,cellEdit as r,casUpdateRow as s,setup as o}from"@sassoftware/restafedit";function c(e){const{appEnv:o}=e,[c,l]=t(!0),[p,i]=t(null),u=t=>{i({status:2,msg:t})},m=o.appControl.appData.getViewer(o.appControl.appData);/*#__PURE__*/return React.createElement(a,null,/*#__PURE__*/React.createElement(m,{onEdit:(t,a,e,n)=>{r(t,a,e,n,o).then(t=>{l(!c),i(null)}).catch(t=>{u(t),i(t)})},onScroll:t=>{n(t,o).then(t=>{l(!c),i({status:0,msg:null})}).catch(t=>{u(t)})},onSave:t=>{s(t,o).then(t=>{i({status:0,msg:t})}).catch(t=>i({status:2,msg:t}))},status:p,appEnv:o}))}var l={DataEditor:function(a){const{viyaConnection:r,appControl:s}=a,[l,p]=t({});e(()=>{(async()=>{let t=await o(r,s);return await n("first",t),t})().then(t=>{p(t)}).catch(t=>{throw new Error(JSON.stringify(t))})},[]);let i=null;return null!=l.session&&(i=/*#__PURE__*/React.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/React.createElement(c,{appEnv:l,key:l.id}))),i},DataViewer:c};export{l as default};
//# sourceMappingURL=index.modern.mjs.map
