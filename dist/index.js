var t=require("react"),e=require("prop-types"),n=require("@sassoftware/restafedit");function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=/*#__PURE__*/r(t),u=/*#__PURE__*/r(e);function o(e){var r=e.appEnv,u=t.useState(!0),o=u[0],i=u[1],c=t.useState(null),s=c[0],l=c[1],p=function(t){l({status:2,msg:t})},f=r.appControl.appData.getViewer(r.appControl.appData);/*#__PURE__*/return a.default.createElement(t.Fragment,null,/*#__PURE__*/a.default.createElement(f,{onEdit:function(t,e,a,u){n.cellEdit(t,e,a,u,r).then(function(t){i(!o),l(null)}).catch(function(t){p(t),l(t)})},onScroll:function(t){n.scrollTable(t,r).then(function(t){i(!o),l({status:0,msg:null})}).catch(function(t){p(t)})},onSave:function(t){n.updateTableRows(t,r).then(function(t){l({status:0,msg:t})}).catch(function(t){return l({status:2,msg:t})})},status:s,appEnv:r}))}function i(e){var r=e.viyaConnection,u=e.appControl,i=t.useState({}),c=i[0],s=i[1];t.useEffect(function(){(function(){try{return Promise.resolve(n.setup(r,u)).then(function(t){return Promise.resolve(n.scrollTable("first",t)).then(function(){return t})})}catch(t){return Promise.reject(t)}})().then(function(t){s(t)}).catch(function(t){throw new Error(JSON.stringify(t))})},[]);var l=null;return null!=c.session&&(l=/*#__PURE__*/a.default.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/a.default.createElement(o,{appEnv:c,key:c.id}))),l}o.propTypes={appEnv:u.default.object.isRequired},i.propTypes={viyaConnection:u.default.object.isRequired,appControl:u.default.object.isRequired},exports.DataEditor=i,exports.DataViewer=o;
//# sourceMappingURL=index.js.map
