var t=require("react"),e=require("@sassoftware/restafedit");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=/*#__PURE__*/n(t);function r(n){var r=n.appEnv,u=t.useState(!0),o=u[0],c=u[1],i=t.useState(null),l=i[0],s=i[1],f=function(t){s({status:2,msg:t})},p=r.appControl.appData.getViewer(r.appControl.appData);/*#__PURE__*/return a.default.createElement(t.Fragment,null,/*#__PURE__*/a.default.createElement(p,{onEdit:function(t,n,a,u){e.cellEdit(t,n,a,u,r).then(function(t){c(!o),s(null)}).catch(function(t){f(t),s(t)})},onScroll:function(t){e.scrollTable(t,r).then(function(t){c(!o),s({status:0,msg:null})}).catch(function(t){f(t)})},onSave:function(t){e.casUpdateRow(t,r).then(function(t){s({status:0,msg:t})}).catch(function(t){return s({status:2,msg:t})})},status:l,appEnv:r}))}module.exports={DataEditor:function(n){var u=n.viyaConnection,o=n.appControl,c=t.useState({}),i=c[0],l=c[1];t.useEffect(function(){(function(){try{return Promise.resolve(e.setup(u,o)).then(function(t){return Promise.resolve(e.scrollTable("first",t)).then(function(){return t})})}catch(t){return Promise.reject(t)}})().then(function(t){l(t)}).catch(function(t){throw new Error(JSON.stringify(t))})},[]);var s=null;return null!=i.session&&(s=/*#__PURE__*/a.default.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/a.default.createElement(r,{appEnv:i,key:i.id}))),s},DataViewer:r};
//# sourceMappingURL=index.js.map
