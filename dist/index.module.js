import t,{useState as n,Fragment as e,PropTypes as r,useEffect as o}from"react";import{scrollTable as i,cellEdit as a,casUpdateRow as c,setup as u}from"@sassoftware/restafedit";function p(r){var o=r.appEnv,u=n(!0),p=u[0],s=u[1],f=n(null),l=f[0],m=f[1],v=function(t){m({status:2,msg:t})},h=o.appControl.appData.getViewer(o.appControl.appData);/*#__PURE__*/return t.createElement(e,null,/*#__PURE__*/t.createElement(h,{onEdit:function(t,n,e,r){a(t,n,e,r,o).then(function(t){s(!p),m(null)}).catch(function(t){v(t),m(t)})},onScroll:function(t){i(t,o).then(function(t){s(!p),m({status:0,msg:null})}).catch(function(t){v(t)})},onSave:function(t){c(t,o).then(function(t){m({status:0,msg:t})}).catch(function(t){return m({status:2,msg:t})})},status:l,appEnv:o}))}function s(e){var r=e.viyaConnection,a=e.appControl,c=n({}),s=c[0],f=c[1];o(function(){(function(){try{return Promise.resolve(u(r,a)).then(function(t){return Promise.resolve(i("first",t)).then(function(){return t})})}catch(t){return Promise.reject(t)}})().then(function(t){f(t)}).catch(function(t){throw new Error(JSON.stringify(t))})},[]);var l=null;return null!=s.session&&(l=/*#__PURE__*/t.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/t.createElement(p,{appEnv:s,key:s.id}))),l}p.propTypes={appEnv:r.object.isRequired},s.propTypes={viyaConnection:PropTypes.object.isRequired,appControl:PropTypes.object.isRequired};export{s as DataEditor,p as DataViewer};
//# sourceMappingURL=index.module.js.map
