import t,{useState as n,Fragment as e,useEffect as r}from"react";import{scrollTable as o,cellEdit as a,casUpdateRow as c,setup as u}from"@sassoftware/restafedit";function i(r){var u=r.appEnv,i=n(!0),s=i[0],f=i[1],l=n(null),p=l[0],m=l[1],h=function(t){m({status:2,msg:t})},v=u.appControl.appData.getViewer(u.appControl.appData);/*#__PURE__*/return t.createElement(e,null,/*#__PURE__*/t.createElement(v,{onEdit:function(t,n,e,r){a(t,n,e,r,u).then(function(t){f(!s),m(null)}).catch(function(t){h(t),m(t)})},onScroll:function(t){o(t,u).then(function(t){f(!s),m({status:0,msg:null})}).catch(function(t){h(t)})},onSave:function(t){c(t,u).then(function(t){m({status:0,msg:t})}).catch(function(t){return m({status:2,msg:t})})},status:p,appEnv:u}))}function s(e){var a=e.viyaConnection,c=e.appControl,s=n({}),f=s[0],l=s[1];r(function(){(function(){try{return Promise.resolve(u(a,c)).then(function(t){return Promise.resolve(o("first",t)).then(function(){return t})})}catch(t){return Promise.reject(t)}})().then(function(t){l(t)}).catch(function(t){throw new Error(JSON.stringify(t))})},[]);var p=null;return null!=f.session&&(p=/*#__PURE__*/t.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/t.createElement(i,{appEnv:f,key:f.id}))),p}export{s as DataEditor,i as DataViewer};
//# sourceMappingURL=index.module.js.map
