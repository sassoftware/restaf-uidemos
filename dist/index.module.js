import{useState as t,Fragment as n,useEffect as e}from"react";import{scrollTable as r,cellEdit as a,casUpdateRow as o,setup as c}from"@sassoftware/restafedit";function i(e){var c=e.appEnv,i=t(!0),u=i[0],s=i[1],f=t(null),l=f[0],p=f[1],m=function(t){p({status:2,msg:t})},h=c.appControl.appData.getViewer(c.appControl.appData);/*#__PURE__*/return React.createElement(n,null,/*#__PURE__*/React.createElement(h,{onEdit:function(t,n,e,r){a(t,n,e,r,c).then(function(t){s(!u),p(null)}).catch(function(t){m(t),p(t)})},onScroll:function(t){r(t,c).then(function(t){s(!u),p({status:0,msg:null})}).catch(function(t){m(t)})},onSave:function(t){o(t,c).then(function(t){p({status:0,msg:t})}).catch(function(t){return p({status:2,msg:t})})},status:l,appEnv:c}))}var u={DataEditor:function(n){var a=n.viyaConnection,o=n.appControl,u=t({}),s=u[0],f=u[1];e(function(){(function(){try{return Promise.resolve(c(a,o)).then(function(t){return Promise.resolve(r("first",t)).then(function(){return t})})}catch(t){return Promise.reject(t)}})().then(function(t){f(t)}).catch(function(t){throw new Error(JSON.stringify(t))})},[]);var l=null;return null!=s.session&&(l=/*#__PURE__*/React.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/React.createElement(i,{appEnv:s,key:s.id}))),l},DataViewer:i};export{u as default};
//# sourceMappingURL=index.module.js.map
