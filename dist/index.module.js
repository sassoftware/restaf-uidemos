import t,{useState as n,Fragment as e,useEffect as r}from"react";import{scrollTable as a,cellEdit as o,casUpdateRow as i,setup as u}from"@sassoftware/restafedit";function c(r){var u=r.appEnv,c=n(!0),s=c[0],f=c[1],l=n(null),p=l[0],m=l[1],h=function(t){m({status:2,msg:t})},v=u.appControl.appData.getViewer(u.appControl.appData);/*#__PURE__*/return t.createElement(e,null,/*#__PURE__*/t.createElement(v,{onEdit:function(t,n,e,r){o(t,n,e,r,u).then(function(t){f(!s),m(null)}).catch(function(t){h(t),m(t)})},onScroll:function(t){a(t,u).then(function(t){f(!s),m({status:0,msg:null})}).catch(function(t){h(t)})},onSave:function(t){i(t,u).then(function(t){m({status:0,msg:t})}).catch(function(t){return m({status:2,msg:t})})},status:p,appEnv:u}))}var s={DataEditor:function(e){var o=e.viyaConnection,i=e.appControl,s=n({}),f=s[0],l=s[1];r(function(){(function(){try{return Promise.resolve(u(o,i)).then(function(t){return Promise.resolve(a("first",t)).then(function(){return t})})}catch(t){return Promise.reject(t)}})().then(function(t){l(t)}).catch(function(t){throw new Error(JSON.stringify(t))})},[]);var p=null;return null!=f.session&&(p=/*#__PURE__*/t.createElement("div",{id:"page-wrap",key:Date()},/*#__PURE__*/t.createElement(c,{appEnv:f,key:f.id}))),p},DataViewer:c};export{s as default};
//# sourceMappingURL=index.module.js.map
