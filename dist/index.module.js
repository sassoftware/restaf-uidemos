import{useState as t,Fragment as n,useEffect as r}from"react";import{scrollTable as o,cellEdit as a,casUpdateRow as e,setup as i}from"@sassoftware/restafedit";function u(r){var i=r.appEnv,u=t(!0),c=u[0],s=u[1],f=t(null),p=f[0],l=f[1],v=function(t){l({status:2,msg:t})},m=i.appControl.appData.getViewer(i.appControl.appData);return h(n,null,h(m,{onEdit:function(t,n,r,o){a(t,n,r,o,i).then(function(t){s(!c),l(null)}).catch(function(t){v(t),l(t)})},onScroll:function(t){o(t,i).then(function(t){s(!c),l({status:0,msg:null})}).catch(function(t){v(t)})},onSave:function(t){e(t,i).then(function(t){l({status:0,msg:t})}).catch(function(t){return l({status:2,msg:t})})},status:p,appEnv:i}))}var c={DataEditor:function(n){var a=n.viyaConnection,e=n.appControl,c=t({}),s=c[0],f=c[1];r(function(){(function(){try{return Promise.resolve(i(a,e)).then(function(t){return Promise.resolve(o("first",t)).then(function(){return t})})}catch(t){return Promise.reject(t)}})().then(function(t){f(t)}).catch(function(t){throw new Error(JSON.stringify(t))})},[]);var p=null;return null!=s.session&&(p=h("div",{id:"page-wrap",key:Date()},h(u,{appEnv:s,key:s.id}))),p},DataViewer:u};export{c as default};
//# sourceMappingURL=index.module.js.map
